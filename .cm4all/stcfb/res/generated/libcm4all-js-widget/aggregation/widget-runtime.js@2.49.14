window.__loadedJsLibraries=window.__loadedJsLibraries||(window.__loadedJsLibraries=new Object());window.__loadedCssLibraries=window.__loadedCssLibraries||(window.__loadedCssLibraries=new Object());if(window.__loadedJsLibraries["/res/js/lib/wrkrndz/jquery-register.js"]!==true){window.__loadedJsLibraries["/res/js/lib/wrkrndz/jquery-register.js"]=true;window.$j=jQuery;if(window.$===window.jQuery){jQuery.noConflict()}jQuery.noConflict=function(){return jQuery}}if(window.__loadedJsLibraries["/res/js/lib/HttpURL.js"]!==true){window.__loadedJsLibraries["/res/js/lib/HttpURL.js"]=true;(function(PKG){if(typeof(window.encodeURIComponent)=="undefined"){window.encodeURIComponent=function(a){return window.escape(a)}}if(typeof(window.decodeURIComponent)=="undefined"){window.decodeURIComponent=function(a){return window.unescape(a)}}PKG.HttpURL=Class.create({initialize:function(g){this.isAbsolute=(g.startsWith("http://")||g.startsWith("https://"));if(!this.isAbsolute){g=PKG.HttpURL.DUMMY_PREFIX+g}this.protocol=null;this.host=null;this.port=-1;this.file=null;this.query=null;this.authority=null;this.path=null;this.userInfo=null;this.ref=null;this.qParams=new Hash();var e,d,f;var b=g;var a=0;var k=null;var h=false;d=g.length;while((d>0)&&(g.charAt(d-1)<=" ")){d--}while((a<d)&&(g.charAt(a)<=" ")){a++}if(g.substr(a,4).toLowerCase()=="url:"){a+=4}if(a<g.length&&g.charAt(a)=="#"){h=true}for(e=a;!h&&(e<d)&&((f=g.charAt(e))!="/");e++){if(f==":"){var j=g.substring(a,e).toLowerCase();k=j;a=e+1;break}}this.protocol=k;if(this.protocol==null){}e=g.indexOf("#",a);if(e>=0){this.ref=g.substring(e+1,d);d=e}this.parseURL(g,a,d);this.parseQueryString()},parseURL:function(j,a,d){var c=false;var g=false;if(a<d){var h=j.indexOf("?");g=(h==a);if(h!=-1){this.query=j.substring(h+1,d);if(d>h){d=h}j=j.substring(0,h)}}var e=0;if((a<=d-2)&&(j.charAt(a)=="/")&&(j.charAt(a+1)=="/")){a+=2;e=j.indexOf("/",a);if(e<0){e=j.indexOf("?",a);if(e<0){e=d}}this.host=this.authority=j.substring(a,e);var b=this.authority.indexOf("@");if(b!=-1){this.userInfo=this.authority.substring(0,b);this.host=this.authority.substring(b+1)}b=this.host.indexOf(":");this.port=-1;if(b>=0){if(this.host.length>(b+1)){this.port=parseInt(this.host.substring(b+1))}this.host=this.host.substring(0,b)}a=e;if(this.authority!=null&&this.authority.length>0){this.file=""}}if(this.host==null){this.host=""}if(a<d){if(j.charAt(a)=="/"){this.file=j.substring(a,d)}else{if(this.file!=null&&this.file.length>0){c=true;var b=this.file.lastIndexOf("/");var f="";if(b==-1&&this.authority!=null){f="/"}this.file=this.file.substring(0,b+1)+f+j.substring(a,d)}else{var f=(this.authority!=null)?"/":"";this.file=f+j.substring(a,d)}}}else{if(g&&this.file!=null){var b=this.file.lastIndexOf("/");if(b<0){b=0}this.file=this.file.substring(0,b)+"/"}}if(this.file==null){this.file=""}if(c){while((e=this.file.indexOf("/./"))>=0){this.file=this.file.substring(0,e)+this.file.substring(e+2)}while((e=this.file.indexOf("/../"))>=0){if((d=this.file.lastIndexOf("/",e-1))>=0){this.file=this.file.substring(0,d)+this.file.substring(e+3)}else{this.file=this.file.substring(e+3)}}while(this.file.substring(this.file.length-3,this.file.length)=="/.."){e=this.file.indexOf("/..");if((d=this.file.lastIndexOf("/",e-1))>=0){this.file=this.file.substring(0,d+1)}else{this.file=this.file.substring(0,e)}}if(this.file.substring(this.file.length-2,this.file.length)=="/."){this.file=this.file.substring(0,this.file.length()-1)}}this.path=this.file;this.file=this.query==null?this.file:this.file+"?"+this.query},parseQueryString:function(){if(this.query==null||this.query.length==0){return}this.qParams=$H(this.query.toQueryParams())},getParameter:function(c,a){if(!c){return a}var b=this.qParams.get(c);return b==null?a:Object.isArray(b)?b.first():b},setParameter:function(b,e,a){if(!b){return}var c=this.qParams.get(b);if(Object.isString(c)){this.qParams.set(b,[c])}if(a||c==null){this.qParams.set(b,new Array())}var d=this.qParams.get(b);if(Object.isArray(e)){this.qParams.set(b,d.concat(e))}else{d.push(e)}},setParameters:function(b,a){$H(b||{}).each(function(c){this.setParameter(c.key,c.value,a)}.bind(this))},removeParameter:function(a){this.qParams.unset(a)},removeAllParams:function(){this.qParams=new Hash()},getParameterValues:function(a){return this.qParams.get(a)},getParameterNames:function(){return this.qParams.keys()},toString:function(){return this.toExternalForm()},toExternalForm:function(){return this._toExternalForm(false)},_toExternalForm:function(b){var a=this.protocol;a+=":";if(this.authority!=null&&this.authority.length>0){a+="//";a+=this.authority}if(this.path!=null){a+=this.path}if(!b){var c=this.qParams.toQueryString();if(c.length>0){a+="?"+c}}if(this.ref!=null){a+="#";a+=this.ref}if(!this.isAbsolute){a=a.substring(PKG.HttpURL.DUMMY_PREFIX.length)}return a},getPrototypePair:function(){return{url:this._toExternalForm(true),parameters:this.qParams}},debug:function(){var a="protocol:  "+this.protocol+"\nhost:      "+this.host+"\nport:      "+this.port+"\nfile:      "+this.file+"\nuserInfo:  "+this.userInfo+"\npath:      "+this.path+"\nref:       "+this.ref+"\nquery:     "+this.query+"\nauthority: "+this.authority+"\nqParams:   "+this.qParams.toQueryString()+"\n\n";if(typeof(console)!="undefined"&&typeof(console.log)=="function"){console.log(a)}else{alert(a)}}});Object.extend(PKG.HttpURL,{DUMMY_PREFIX:"http://dummy/",urlencode:function(d){var c=/\+/g;var b=/%20/g;var a=/'/g;d=encodeURIComponent(d);return d.replace(c,"%2B").replace(b,"+").replace(a,"%27")},urldecode:function(b){var a=/\+/g;b=b.replace(a,"%20");return decodeURIComponent(b)},makeAbsolute:function(a){return PKG.HttpURL.qualify(a)},qualify:function(a){if(!this.qualifyCache){this.qualifyCache={};this.anchor=new Element("a",{href:"#"}).update("x");this.div=new Element("div").insert(this.anchor)}if(!this.qualifyCache[a]){this.anchor.href=a;this.qualifyCache[a]=this.anchor.href}return this.qualifyCache[a]},quEscape:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")}});window.HttpURL=PKG.HttpURL;window.HttpURLUtils={rotBase:1,rotateString:function(f,d){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var e=new String();d=new Number(d);for(var b=0;b<f.length;b++){var c=f.substring(b,b+1);var g=a.indexOf(c.toUpperCase());if(g>=0){g=(g+d)%a.length;c=(c==c.toUpperCase())?a.substring(g,g+1):a.substring(g,g+1).toLowerCase()}e=e+c}return e},reverseString:function(a){a=(a||"");return a.split("").reverse().join("")},setReverseParameter:function(b,a,d){var c=b.getParameter("rot-base");c=b.getParameter("rot-base");if(!c){c=new HttpURL(document.location.href).getParameter("rot-base");if(c){c=((new Number(c)+1)%26)+1}if(!c){c=((HttpURLUtils.rotBase++)%26)+1}b.setParameter("rot-base",c)}d=HttpURLUtils.rotateString(d,c);b.setParameter(a,HttpURLUtils.reverseString(d))},getReverseParameter:function(c,b,a){var e=HttpURLUtils.reverseString(c.getParameter(b));var d;if(e&&(d=c.getParameter("rot-base"))!=""){d=26-new Number(d);e=HttpURLUtils.rotateString(e,d)}return(e||a)}}})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.js"]=true;(function(PKG){PKG.Common=({});Object.extend(PKG.Common,{_defaultLogger:null,getLibServer:function(){if(window.jslibServer){return window.jslibServer}if(window.beng&&window.beng.env&&window.beng.env.common_prefix){return window.beng.env.common_prefix}return""},requireLibrary:function(e,g){var c=this;if(!Object.isArray(e)){e=[e]}var b=e[0];if(Object.isArray(b)){var f=e.findAll(function(h){return Object.isArray(h)?Object.toJSON(h)!=Object.toJSON(b):true});var a=function(){PKG.Common.requireLibrary.bind(c,f,g).defer()};var d={paylord:b};b.each(function(h){PKG.Common.__requireLibrary(h,d,a,true)});return}else{if(b){PKG.Common.__requireLibrary(b,{paylord:e},g,false)}else{if(typeof(g)=="function"){g()}}}},__requireLibrary:function(a,e,h,c){var d;var g=null;var b;var i=window.__loadedJsLibraries||(window.__loadedJsLibraries=new Object());if(Object.isFunction(a.isLoaded)){d=a.isLoaded()}else{if(i[a]===true){d=true}else{d=(g=$$("script").find(function(j){return(PKG.HttpURL.qualify(j.src)==PKG.HttpURL.qualify(a.url||a))}))?true:false}}if(!d){g=new Element("script",{type:"text/javascript"});var f=PKG.Common.getOrCreateHeadElement();b=function(){var j=a.url||a;if(!i[j]&&(!g.readyState||g.readyState=="loaded"||g.readyState=="complete")){i[j]=true;g.removeAttribute("dirty");PKG.Common.log("JS: --> loaded: "+j);PKG.Common.callbackFunc(a,e,{callback:h,script:g,skipCheck:false,isParallel:c})}};Event.observe(g,"error",b);Event.observe(g,"load",b);Event.observe(g,"readystatechange",b);g.setAttribute("dirty","dirty");g.src=a.url||a;PKG.Common.log("JS: --> loading: "+(a.url||a));f.insert({bottom:g});f=null}else{b=function(){if(g&&g.getAttribute("dirty")){window.setTimeout(b,10);return}PKG.Common.log("JS: --> already present: "+(a.url||a));PKG.Common.callbackFunc(a,e,{callback:h,script:new Element("script"),skipCheck:true,isParallel:c});g=null;b=null};b.call(this)}},loadCss:function(c,b){if(!Object.isArray(c)){c=[c]}var a=PKG.Common.getOrCreateHeadElement();c.each(function(d){if(Object.isArray(d)){PKG.Common.loadCss(d)}else{var g;var f=window.__loadedCssLibraries||(window.__loadedCssLibraries=new Object());if(f[d]===true){g=true}else{g=$$("link").any(function(h){return(PKG.HttpURL.qualify(h.href)==PKG.HttpURL.qualify(d))})}if(!g){var e={};e[b||"bottom"]=new Element("link",{type:"text/css",rel:"stylesheet",href:d});a.insert(e);f[d]=true}}})},loadAssets:function(b,a){b=Object.ensureArray(b);b.each(function(c){c.options.method=c.options.method||"get";var d={onSuccess:c.options.onSuccess||null,onFailure:c.options.onFailure||null};var e=function(g,f){if(d[g]){d[g](f)}c.ready=true;if(b.pluck("ready").all()&&Object.isFunction(a)){a()}};c.options.onSuccess=e.curry("onSuccess");c.options.onFailure=e.curry("onFailure");new Ajax.Request(c.url,c.options)})},log:function(a){if(PKG.Common._defaultLogger==null){PKG.Common._defaultLogger=new PKG.Common.Logger()}PKG.Common._defaultLogger.debug(a)},doubleTapToGo:function(a){if(navigator.userAgent.match(/iPhone|iPad|iPod/)==false){(function(d,c,b,e){d.fn.doubleTapToGo=function(f){if(!("ontouchstart" in c)&&!navigator.msMaxTouchPoints&&!navigator.userAgent.toLowerCase().match(/windows phone os 7/i)){return false}this.each(function(){var g=false;d(this).on("click",function(i){var h=d(this);if(h[0]!=g[0]){i.preventDefault();g=h}});d(b).on("click touchstart MSPointerDown",function(l){var k=true,h=d(l.target).parents();for(var j=0;j<h.length;j++){if(h[j]==g[0]){k=false}}if(k){g=false}})});return this}})(jQuery,window,document);jQuery(a).doubleTapToGo()}},openFullscreen:function(j,p){p=p||{};if(p.width&&p.height){var i=document.viewport.getDimensions();i.width=i.width-40;i.height=i.height-40;if(p.width>i.width){var b=p.height/p.width;p.width=i.width;p.height=p.width*b}if(p.height>i.height){var b=p.width/p.height;p.height=i.height;p.width=p.height*b}}var c;var m;var l;var o;var a;var g;var n;var d;var k;var h;var e;var f={"top-left":null,"top-right":null,"bottom-right":null,"bottom-left":null,"left-spacer":null,"right-spacer":null,"top-spacer":null,"bottom-spacer":null};if(Object.isElement(j)){j=$(j);h=j.up();e=j.next()}m=new Element("div",{"class":"cm-fullscreen padding1"}).insert(new Element("div",{"class":"cm-fullscreen padding2"}).insert(l=new Element("div",{"class":"cm-fullscreen padding3"})));g=new Element("div",{"class":"cm-fullscreen container"});n=new Element("div",{"class":"cm-fullscreen background"});jQuery(n).css("opacity","0.5");o=new Element("div",{"class":"cm-fullscreen justify"}).insert(a=new Element("div",{"class":"cm-fullscreen justify1"}));d=new Element("div",{"class":"cm-fullscreen content"});lscrollbars=new Element("div",{"class":"cm-fullscreen scrollbars"});c=new Element("div",{"class":"cm-fullscreen inner"});if((/x/i).test(p.scrollbars)){lscrollbars.addClassName("scrollbars-x")}if((/y/i).test(p.scrollbars)){lscrollbars.addClassName("scrollbars-y")}k=new Element("div",{"class":"cm-fullscreen close"});k.observe("click",function(){if(h){h.insertBefore(j,e||null)}var q=g.select("iframe");q.each(function(s,r){try{s.src="about:blank"}catch(t){Common.log(t.message)}});g.remove()});Object.keys(f).each(function(q){f[q]=new Element("div",{"class":"cm-fullscreen shadow"}).addClassName(q)});if(p.width){if(/%$/.test(p.width)){d.setStyle({width:p.width,left:((100-Number(/(.*)%$/.exec(p.width)[1]))/2)+"%"}).addClassName("percent-width")}else{o.setStyle({width:p.width+"px"});if((/x/i).test(p.scrollbars)){c.setStyle({minWidth:p.width+"px"})}g.addClassName("fixed-width")}}else{if(p.left&&p.right){d.setStyle({left:p.left+"px",right:p.right+"px"})}else{throw new Error("Illegal Arguments: either options.width or options.left/options.right must be set")}}if(p.height){if(/%$/.test(p.height)){d.setStyle({height:p.height,top:((100-Number(/(.*)%$/.exec(p.height)[1]))/2)+"%"}).addClassName("percent-height")}else{o.setStyle({height:p.height+"px"});if((/y/i).test(p.scrollbars)){c.setStyle({minHeight:p.height+"px"})}g.addClassName("fixed-height")}}else{if(p.top&&p.bottom){d.setStyle({top:p.top+"px",bottom:p.bottom+"px"})}else{throw new Error("Illegal Arguments: either options.height or options.top/options.bottom must be set")}}g.insert(n);Object.keys(f).each(function(q){d.insert(f[q])});g.insert(m);l.insert(o);a.insert(d);d.insert(lscrollbars);lscrollbars.insert(c);c.insert(j);d.insert(k);$(document.body).insert(g);return c},callbackFunc:function(a,c,b){if(b.script.importDone){return}if(!b.skipCheck&&b.script.readyState&&b.script.readyState!="loaded"&&b.script.readyState!="complete"){return}b.script.importDone=true;c.paylord=c.paylord.findAll(function(d){return Object.toJSON(d)!=Object.toJSON(a)});PKG.Common.log("JS: <-- done "+(a.url||a)+","+c.paylord.length);if(c.paylord.length==0){if(typeof(b.callback)=="function"){b.callback()}return}if(!b.isParallel){PKG.Common.requireLibrary.bind(this,c.paylord,b.callback).defer()}},hintingHandler:function(f,e,c){var d={"cm-pixel-small":function(g){return g<200},"cm-pixel-medium":function(g){return g>=200&&g<400},"cm-pixel-large":function(g){return g>=400},"cm-pixel-xlarge":function(g){return g>=550}};var b={"cm-container-small":d["cm-pixel-small"],"cm-container-medium":d["cm-pixel-medium"],"cm-container-large":d["cm-pixel-large"],"cm-container-xlarge":d["cm-pixel-xlarge"]};var a=function(l,h,k){var g=jQuery(k);var j=g.width();jQuery.each(l,function(i,m){if(m(j)){g.addClass(i)}else{g.removeClass(i)}})};if(e){jQuery(e).filter(".cm_widget").each(a.curry(d));jQuery(e).filter("[data-cm-hintable], [cm_type], #mobileContent").each(a.curry(b))}else{jQuery(".cm_widget",c).each(a.curry(d));jQuery("[data-cm-hintable], [cm_type], #mobileContent",c).each(a.curry(b))}},getOrCreateHeadElement:function(){var b=$$("head");if(b.first()){return b.first()}var a=new Element("head");$$("html").first().insert({top:a});return a}});Object.extend(PKG.Common,{Logger:Class.create({_logMessages:"",_logLevel:null,initialize:function(a){this.context=a||""},debug:function(b){var a=$A(arguments);a.unshift(PKG.Common.Logger.DEBUG);this._log.apply(this,a)},info:function(b){var a=$A(arguments);a.unshift(PKG.Common.Logger.INFO);this._log.apply(this,a)},warn:function(b){var a=$A(arguments);a.unshift(PKG.Common.Logger.WARN);this._log.apply(this,a)},error:function(b){var a=$A(arguments);a.unshift(PKG.Common.Logger.ERROR);this._log.apply(this,a)},fatal:function(b){var a=$A(arguments);a.unshift(PKG.Common.Logger.FATAL);this._log.apply(this,a)},setLogLevel:function(a){this._logLevel=a},getLogLevel:function(){return this._logLevel},_log:function(e,d){if(!PKG.Common.Logger.isEnabled()){return}var a=this.getLogLevel()||PKG.Common.Logger.getLogLevel();if(e[0]<a[0]){return}var c=(new Date().toString()+(this.context?" ["+this.context+"]":" [<default>]")+" "+e[1]+": "+d);if(typeof console!="undefined"&&!Object.isUndefined(console.log)){console.log(c);for(var b=2;b<arguments.length;b++){console.log(arguments[b])}}}})});Object.extend(PKG.Common.Logger,{DEBUG:[0,"DEBUG"],INFO:[1,"INFO"],WARN:[2,"WARN"],ERROR:[3,"ERROR"],FATAL:[4,"FATAL"],DISABLED:[5,""],enable:function(){PKG.Common.Logger._enabled=true;getTopWindow().document.cookie="cm_debug=true"},isEnabled:function(){if(typeof(PKG.Common.Logger._enabled)=="undefined"){if(typeof(getTopWindow)=="undefined"){return false}PKG.Common.Logger._enabled=false;var b=getTopWindow().document.cookie;var a=b.indexOf("cm_debug=");if(a>=0&&b.substring(a+9,a+9+4)=="true"){PKG.Common.Logger._enabled=true}}return PKG.Common.Logger._enabled},setLogLevel:function(a){PKG.Common.Logger._logLevel=a;getTopWindow().document.cookie="cm_debug_level="+a[1]},getLogLevel:function(){if(typeof(PKG.Common.Logger._logLevel)=="undefined"){if(typeof(getTopWindow)=="undefined"){return false}PKG.Common.Logger._logLevel=null;var d=getTopWindow().document.cookie;var a=d.indexOf("cm_debug_level=");if(a>=0){var b=d.indexOf(";",a);PKG.Common.Logger._logLevel=PKG.Common.Logger[d.substring(a+15,b!=-1?b:d.length)]}}return PKG.Common.Logger._logLevel||PKG.Common.Logger.DEBUG}});Object.extend(PKG.Common,{Lib:{_:(window.beng&&window.beng.env&&window.beng.env.common_prefix?window.beng.env.common_prefix:"")}});Object.extend(PKG.Common.Lib,{scriptaculous:{builder:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/builder.js"],effects:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js"],slider:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/slider.js"],sound:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/sound.js"],unittest:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/unittest.js"],dragdrop:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js",PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/dragdrop.js"],controls:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js",PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/controls.js"]},jquery:{ui:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery-ui.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/i18n/jquery-ui-i18n.js"],ui_datepicker:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery.ui.core.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery.ui.datepicker.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/i18n/jquery-ui-i18n.js"]}});Object.extend(PKG.Common,{Css:{jquery:{ui:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.all.css"],ui_datepicker:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.base.css",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.datepicker.css"],ui_theme:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.theme.css"]}}});window.Common=PKG.Common;window.Common.Logger=PKG.Common.Logger;jQuery(window).ready(PKG.Common.hintingHandler).resize(PKG.Common.hintingHandler);window.createBengRequestUrl=function(b,d,n,c,m,o,h){n=(n||{});d=(d||{});c=(c||{});var g="";var j="";var a,k;for(a in n){g+=a+"="+n[a]+"&"}for(a in c){j+=a+"="+c[a]+"&"}g=jencode(g);var l=/%/g;g=g.replace(l,"$");for(var a in d){k=jencode(d[a]);k=k.replace(l,"$");b+="/"+a+"="+k}if(g){b+="/header="+g}if(!m){b+="/cc="+new Date().getTime()}var f="";try{f=getTopWindow().urlSessionId||""}catch(i){}b=beng_widget_uri(b,f,null,typeof o=="string"?o:null,h||null,null,(j!=""?j:null));return b}})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.Widget.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.Widget.js"]=true;(function(PKG){Object.extend(PKG.Common,{Widget:Class.create({initialize:function(a){this.definition=a||{};this.__dirty=0;PKG.Common.EventDispatcher.registerListener(PKG.Common.Event.WidgetConf,function(b){if(!Object.isUndefined(window.currentWidgetConf)){++this.__dirty}}.bind(this))},doRequest:function(b,c,h,a){var g=new PKG.HttpURL(this.createUrl(b,a));var i=$H(c||{});var d=i.get("parameters")||{};var e=null;var f;d=$H(Object.isString(d)?d.toQueryParams():d);g.setParameters(h);g.setParameters(d);e=g.getPrototypePair();if(i.get("postBody")){f=g.toExternalForm()}else{f=e.url;i.set("parameters",e.parameters)}return new Ajax.Request(f,i.toObject())},invokeXlate:function(c,b,a){Xlate.invoke({namespace:this.getCatalogNameFromClassId(),language:c,country:b,callback:a,urlGenerator:function(f,d,g,e){return this.createUrl("res/LC_MESSAGES/"+g+(e?"_"+e:"")+d+".js")}.bind(this)})},getCatalogNameFromClassId:function(){if(!this.definition.classId){throw new Error("definition.classId must be set!")}return this.definition.classId.split(/\./).last().sub(/^./,function(a){return a[0].toLowerCase()})},getLocale:function(){return Try.these(function(){var a=getTopWindow();return{language:a.I18N.language,country:a.I18N.country}},function(){return{language:"de",country:"DE"}})},loadGuiRenderer:function(c,a,g){var b=this;var d=function(){var h={css:"/res/js/guilib/guilib-min.css",js:"/res/js/guilib/guilib-min.js"};try{h=jQuery.cm4all.guilib.bootstrap.data}catch(i){Common.log("No guilib bootstrap data found")}if(typeof h.css=="string"){h.css=[h.css]}if(g!==true){h.css.push("/beng/coma/dynamic.cls/ui-theme.css")}PKG.Common.loadCss(h.css);PKG.Common.requireLibrary(h.js,function(){jQuery(document).ready(function(){if(window.cm4all.ui.OPTIONS&&window.cm4all.ui.OPTIONS.RENDER_MODE){Xlate.invoke({namespace:"guilib",language:b.getLocale().language,country:b.getLocale().country,callback:function(n){var e=jQuery.isEmptyObject(n.data)?b.getLocale():n;jQuery.cm4all.guilib.getRenderer().setOption(window.cm4all.ui.OPTIONS.I18N,e);if(a===false){if(Object.isFunction(c)){c(jQuery)}}else{var p={};p[window.cm4all.ui.OPTIONS.RENDER_MODE]=window.cm4all.ui.VALUES.RENDER_MODE_CONFIG;p[window.cm4all.ui.OPTIONS.ERROR_CALLBACK]=function(q){window.console&&window.console.error&&window.console.error(q)};if(window.currentWidgetConf&&window.currentWidgetConf.options){p[window.cm4all.ui.OPTIONS.DIALOG_TITLE]=window.currentWidgetConf.options.dialogTitle;if(window.currentWidgetConf.options.dialogSize){var m=window.currentWidgetConf.options.dialogSize.height;var l=window.currentWidgetConf.options.dialogSize.width;var o;if(l<=400&&m<=150){o="xsmall"}else{if(l<=400){o="small"}else{if(l<=600){o="medium"}else{o="large"}}}p[window.cm4all.ui.OPTIONS.DIALOG_PREFERRED_SIZE]=o}}if(parent.closeWidgetConfiguration){p[window.cm4all.ui.OPTIONS.DIALOG_CLOSE_ACTION]=parent.closeWidgetConfiguration.bind(parent,false)}if(Object.isFunction(c)){p[window.cm4all.ui.OPTIONS.RENDER_CALLBACK]=c}window.cm4all.ui.adapt(jQuery(a||"form:first"),p)}}})}else{try{window.cm4all.ui.overlay(jQuery('<div id="io-'+(new Date().getTime())+'"></div>'),{autoShow:false})}catch(k){PKG.Common.log(k.message)}if(a===false){if(Object.isFunction(c)){c(jQuery)}}else{var j={};j[jQuery.cm4all.guilib.theme.OPTIONS.ERROR_CALLBACK]=function(e){window.console&&window.console.error&&window.console.error(e)};j[jQuery.cm4all.guilib.theme.OPTIONS.RENDER_CALLBACK]=Object.isFunction(c)?c:function(){};j[jQuery.cm4all.guilib.theme.OPTIONS.IS_WIDGET_CONFIG]=true;if(jQuery.cm4all.guilib.themes.generic.OPTIONS.DIALOG_CLOSE_ACTION){j[jQuery.cm4all.guilib.themes.generic.OPTIONS.DIALOG_CLOSE_ACTION]=parent.closeWidgetConfiguration?parent.closeWidgetConfiguration.bind(parent,false):false}jQuery.cm4all.guilib.theme.adapt(jQuery(a||"form:first"),j)}}})})};try{ld=jQuery.cm4all.guilib.bootstrap.data;d()}catch(f){PKG.Common.requireLibrary("/res/js/guilib/guilib-bootstrap.js",d)}},loadWidgetRuntime:function(a,b){PKG.Common.requireLibrary(b||[],a)},createUrl:function(c,a){if(typeof(beng_widget_uri)!="undefined"&&Object.isFunction(beng_widget_uri)){var b="raw";if(a===true||(typeof(a)=="object"&&a.doProcess===true)){b=null}return beng_widget_uri(this.definition.base,this.definition.session,this.definition.frame,this.definition.path,"partial",c?c:null,null,b)}if(this.__dirty>0){c=c.replace(/\/cc=([0-9]+)/,"/cc=$1_"+this.__dirty)}return c},createStaticClassUrl:function(a){if(!this.definition.classId){throw new Error("definition.classId must be set!")}return"/.cm4all/widgetres.php/"+this.definition.classId+(a.indexOf("/")!=0?"/":"")+a},createCommonUrl:function(a){if(window.beng&&window.beng.env&&window.beng.env.common_prefix){return window.beng.env.common_prefix+a}return a},fireEvent:function(d,e){var c=cm4all.Common.Widget.getMainWindow().editroChannel.widgetInstance;var a=cm4all.Common.Widget.getEditro();e.unshift(c);e.unshift(a);var b=new d(a,c);b.initialize.apply(b,e);PKG.Common.EventDispatcher.fireEvent(b)},setWidgetMaxWidth:function(c,a){if(!this.definition.wiid){throw new Error("definition.wiid must be set!")}var b="";var d="";if(a){b="@media "+a+" {";d="}"}jQuery("<style type='text/css'>"+b+" #widgetcontainer_"+this.definition.wiid+"{max-width: "+c+" !important;}"+d+"</style>").appendTo("head")},setWidgetToBlock:function(a){if(!this.definition.wiid){throw new Error("definition.wiid must be set!")}var b="";var c="";if(a){b="@media "+a+" {";c="}"}jQuery("<style type='text/css'>"+b+" #widgetcontainer_"+this.definition.wiid+"{width: 100% !important; max-width: 100% !important;}"+c+"</style>").appendTo("head")}})});Object.extend(PKG.Common.Widget,{getEditro:function(){var a=Try.these(function(){return cm4all.Editro.getInstance()},function(){return parent.cm4all.Editro.getInstance()},function(){return parent.parent.cm4all.Editro.getInstance()},function(){return controlpanel.getEditorWnd().cm4all.Editro.getInstance()},function(){return parent.editroChannel.editro},function(){return parent.parent.editroChannel.editro})||null;if(!a){a=parent.parent.parent.frames["main-frame"].cm4all.Editro.getInstance()}if(!a){throw new Error("No editor context found! (Are you trying to access editor in published website?)")}return a},getMainWindow:function(){var a=null;try{a=PKG.Common.Widget.getEditro()}catch(b){}if(a){return a.getMainWindow()}else{Common.log("Falling back to 'getTopWindow()'!");return getTopWindow()}}});if(PKG===window.cm4all&&!PKG.Common.Event){Object.extend(PKG.Common,{Event:Class.create({__isEvent:true,clsid:"PKG.Common.Event",initialize:function(a){this.__source=a},getSource:function(){return this.__source}})});cm4all.Common.Event.WidgetConf=Class.create(cm4all.Common.Event,{clsid:"cm4all.Common.Event.WidgetConf",initialize:function($super,a){$super(a)}})}if(PKG===window.cm4all&&!PKG.Common.EventDispatcher){Object.extend(PKG.Common,{EventDispatcher:{__id:new Date().toTimeString()+Math.random(),__eventListeners:{},fireEvent:function(f,e){var d,h,b,a,c;var g=window;do{c=g.cm4all.Common;if(c){d=f.constructor;do{h=c.EventDispatcher.__eventListeners[d.prototype.clsid]||(c.EventDispatcher.__eventListeners[d.prototype.clsid]=[]);if(h){for(b=0;b<h.length;b++){if(!e){h[b].call(g,f)}else{(function(){var j=g;var i=h[b];j.setTimeout(function(){i.call(j,f)},0)})()}}}}while(d=d.superclass)}a=g;g=g.parent}while(a!=g)},registerListener:function(c,b){if(!c.prototype.__isEvent){throw new Error("Not an Event class: "+c.toString())}var a=PKG.Common;var d=a.EventDispatcher.__eventListeners[c.prototype.clsid]||(a.EventDispatcher.__eventListeners[c.prototype.clsid]=[]);d.push(b)},deregisterListener:function(d,c){if(!d.prototype.__isEvent){throw new Error("Not an Event class: "+d.toString())}var b=PKG.Common;var e=b.EventDispatcher.__eventListeners[d.prototype.clsid]||(b.EventDispatcher.__eventListeners[d.prototype.clsid]=[]);var a;for(a=e.length-1;a>=0;a--){if(c===e[a]){e.splice(a,1)}}}}})}window.Common.Widget=PKG.Common.Widget})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.MobileBrowserSwitch.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.MobileBrowserSwitch.js"]=true;(function(PKG){Object.extend(PKG.Common,{MobileBrowserSwitch:{mobileAgents:["iphone","ipod","blackberry","pre/","palm","hiptop","avantgo","plucker","xiino","blazer","elaine","bada/","kindle","android","iris","3g_t","windows ce","windows phone","iemobile","opera mini","opera mobi"],isMobileAgent:function(b){var a;b=b.toLowerCase();for(a=0;a<MobileBrowserSwitch.mobileAgents.length;a++){if(b.indexOf(MobileBrowserSwitch.mobileAgents[a])!=-1){return true}}return false}}});window.MobileBrowserSwitch=PKG.Common.MobileBrowserSwitch})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Strftime.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Strftime.js"]=true;(function(PKG){PKG.Strftime=({});Object.extend(PKG.Strftime,{Date:({fromUtcIso:function(a){return PKG.Strftime.Date.fromIso(a,true)},fromIso:function(b,a){return PKG.Strftime.Date._fromPattern(b,[0,4,5,7,8,10,11,13,14,16,17,19],a)},fromUtcTimestamp:function(a){return PKG.Strftime.Date.fromTimestamp(a,true)},fromTimestamp:function(b,a){return PKG.Strftime.Date._fromPattern(b,[0,4,4,6,6,8,8,10,10,12,12,14],a)},_fromPattern:function(b,c,a){return function(j,e,h,g,i,f){return(a?new Date(Date.UTC(j,e,h,g,i,f)):new Date(j,e,h,g,i,f))}.apply(this,[b.substring(c[0],c[1]),b.substring(c[2],c[3])-1,b.substring(c[4],c[5]),b.substring(c[6],c[7]),b.substring(c[8],c[9]),b.substring(c[10],c[11])])}}),format:function(p,q,m,n){var f=p;var r=PKG.Strftime.getConfig(m,n);var a=q.getFullYear();var k=q.getMonth();var h=q.getDate();var c=q.getDay();var j=q.getHours();var s=q.getMinutes();var b=q.getSeconds();var g=""+a;var l=(j>12?j-12:(j==0?12:j));var e=(j>=12?"PM":"AM");var d=[/%a/g,r.dayNames[c].substring(0,r.dayShortcutLength),/%A/g,r.dayNames[c],/%b/g,r.monthNames[k].substring(0,r.monthShortcutLength),/%B/g,r.monthNames[k],/%d/g,(h<10?"0":"")+h,/%e/g,(h<10?" ":"")+h,/%H/g,(j<10?"0":"")+j,/%I/g,(l<10?"0":"")+l,/%k/g,(j<10?" ":"")+j,/%l/g,(l<10?" ":"")+l,/%m/g,(k<9?"0":"")+(k+1),/%M/g,(s<10?"0":"")+s,/%n/g,"\n",/%p/g,e,/%S/g,(b<10?"0":"")+b,/%y/g,g.substring(2,4),/%Y/g,g];for(var o=0;o<d.length;o+=2){f=f.replace(d[o],d[o+1])}return f},getConfig:function(b,a){return(PKG.Strftime.configuration[b]||PKG.Strftime.configuration.en)},configuration:{de:{monthNames:["Januar","Februar","März","April","May","Juni","Juli","August","September","Oktober","November","Dezember"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:2},en:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:3},it:{monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:2},es:{monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:2},pt:{monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:3},jp:{monthNames:["１月","２月","３月","４月","５月","６月","７月","８月","９月","１０月","１１月","１２月"],dayNames:["日","月","火","水","木","金","土"],week:[0,1,2,3,4,5,6],monthShortcutLength:100,dayShortcutLength:100},pl:{monthNames:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","pazdziernika","listopada","grudnia"],dayNames:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:3}}});window.Strftime=PKG.Strftime})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Xlate.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Xlate.js"]=true;(function(PKG){PKG.Xlate=Class.create({namespace:null,language:null,country:null,data:null,initialize:function(a,d,b,c){this.namespace=a;this.language=d;this.country=b;this.data={}},setData:function(a){if(a!=null){this.data=a}},format:function(d,g){var e=this.data.translations;var c=null;var b=null;g=$H(g||{});c=e?e.get(d):d;if(c!=null){var a=d.indexOf("${#");if(a!=-1){b=g.get(d.substring(a+3,d.indexOf("}",a+3)))}if(b!=null){var f=e?e.get(d):d;if(!Object.isString(f)){c=$H(f).get(this.data.pluralrule(b))}}}if(!c){c=d}g.each(function(h){try{c=c.replace(new RegExp("\\$\\{\\#?"+h.key+"(%T:[^}]*)?\\}","g"),function(j,k){if(k&&k.length>3){return PKG.Strftime.format(k.substring(3),h.value,this.language,this.country)}return h.value}.bind(this))}catch(i){PKG.Common.log(c+"\n"+h.key+"\n"+this.namespace)}}.bind(this));return c},hasKey:function(b){var a=(!!(this.data.translations)&&(!!(this.data.translations.get(b)=="")||!!(this.data.translations.get(b))));return a},translateHTML:function(b,a){(a?b.jQuery(a).find("[lang^=x-late]"):b.jQuery("[lang^=x-late]")).each(function(f,d,e){e=f.$(e);var g=PKG.Xlate._extractId(e);var c=this.format(g);if(c==g&&g.match(/&amp;/)){g=g.replace(/&amp;/,"&");c=this.format(g)}if(c){e.removeAttribute("xml:lang");e.setAttribute("lang",this.language+"-"+this.country);e.update(c)}}.bind(this,b))}});Object.extend(PKG.Xlate,{data:new Hash(),xlates:new Hash(),invoke:function(c){if(!Object.isFunction(c.callback)){throw new Error("definition.callback must be set!")}if(!Object.isArray(c.namespace)){c.namespace=[c.namespace]}var a=c.namespace.map(function(f){return PKG.Xlate.createRefId(f,c.language,c.country)});var b=a.map(function(f){return PKG.Xlate.xlates.get(f)});if(b.all()){c.callback(b[0])}else{var e=c.namespace.map(function(g,f){var h=Prototype.K;if(Object.isFunction(c.urlGenerator)){h=c.urlGenerator}else{if(Object.isString(c.urlGenerator)){h=function(i){return c.urlGenerator+i}}else{if(Object.isArray(c.urlGenerator)){h=c.urlGenerator[f]||Prototype.K}}}return h});var d=b.map(function(h,f){if(h){return null}var g=c.namespace[f];return e[f]("/res/generated/i18n/"+c.language+"/"+c.country+"/"+g+".js",g,c.language,c.country)}).filter(Prototype.K);PKG.Common.requireLibrary(d,function(){var j=PKG.Xlate.data.get(a[0]);if(j){for(var f=1;f<c.namespace.length;f++){var h=PKG.Xlate.data.get(a[f]);if(h){PKG.Xlate.set(c.namespace[0],c.language,c.country,h.translations,true,j.pluralrule)}}}else{Common.log("po file not installed: "+a[0])}var g=new PKG.Xlate(c.namespace[0],c.language,c.country);g.setData(PKG.Xlate.data.get(a[0]));PKG.Xlate.xlates.set(a[0],g);c.callback(g)})}},set:function(b,h,f,e,d,g){var c=PKG.Xlate.createRefId(b,h,f);var a=(PKG.Xlate.data.get(c)||PKG.Xlate.data.set(c,{translations:new Hash(),pluralrule:new Hash()}));if(d){a.translations.update(e);a.pluralrule=g}else{PKG.Xlate.data.set(c,{translations:$H(e).update(a.translations),pluralrule:g})}},createRefId:function(a,c,b){return(c+"/"+b+"/"+a)},translateHTML:function(e,c,d,b){var a=new Hash();(b?Element.select(b,"[lang^=x-late-]"):$$("[lang^=x-late-]")).each(function(g){var f=g.readAttribute("lang").substring(7).replace(/-/g,".");if(!a.get(f)){a.set(f,true);PKG.Xlate.invoke({namespace:f,language:e,country:c,urlGenerator:d,callback:function(h){(b?Element.select(b,"[lang^=x-late-]"):$$("[lang^=x-late-]")).each(function(j){var k=PKG.Xlate._extractId(j);var i=h.format(k);if(i==k&&k.match(/&amp;/)){k=k.replace(/&amp;/,"&");i=h.format(k)}if(i){j.setAttribute("lang",h.language+"-"+h.country);j.update(i)}})}})}})},_extractId:function(a){return PKG.Xlate._removeComments(a.cloneNode(true)).innerHTML.replace(/^\s*(.*?)\s*$/,"$1").replace(/\s+/g," ")},_removeComments:function(a){a=$(a);a.childElements().each(function(b){PKG.Xlate._removeComments(b)});if(a.nodeType==Node.COMMENT_NODE){a.remove()}return a}});window.Xlate=PKG.Xlate;window.I18N=({loaded:{},langObjects:{},language:(getTopWindow().theLanguage||(getTopWindow().locale?getTopWindow().locale.replace(/_.*/,""):null)),country:(getTopWindow().theCountry||(getTopWindow().locale?getTopWindow().locale.replace(/.*_/,""):null)),setTextObject:function(a,e,d,h,g,f){PKG.Xlate.set(a,g,f,e,d,h);var c=PKG.Xlate.createRefId(a,g,f);var b=new PKG.Xlate(a,g,f);b.setData(PKG.Xlate.data.get(c));PKG.Xlate.xlates.set(c,b)},load:function(a,d,f,c){if(f){I18N.language=f}if(c){I18N.country=c}d=d||{};a=(a instanceof Array?a:[a]);var e=[];for(var g=0;g<a.length;g++){var j=I18N.language+"/"+I18N.country+"/"+a[g];if(!I18N._createXRefClosure(j)()){var h="/res/generated/i18n/"+j+".js";if(d.url){if(typeof(d.url)=="function"){h=d.url(h)}else{h=d.url+h}}e.push({url:h,test:I18N._createXRefClosure(j)})}}if(d.mode=="preload"){var b;while(e.length>0){b=e.shift();document.write('<SCRIPT src="'+b.url+'"></SCRIPT>')}}else{throw new Error("Operation not supported, use cm4all.Xlate object instead!")}},_createXRefClosure:function(a){return function(){return typeof I18N.langObjects[a]!="undefined"}},xlate:function(b,a,d){var c=PKG.Xlate.xlates.get(PKG.Xlate.createRefId(b,I18N.language,I18N.country));if(c){return c.format(a,d)}else{if(getTopWindow()!=window){return getTopWindow().I18N.xlate(b,a,d)}else{return a}}}})})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/XSLTProcessor.js"]!==true){window.__loadedJsLibraries["/res/js/lib/XSLTProcessor.js"]=true;Transformer=Class.create({xslt:null,xml:null,_loadDocument:function(a){if(Prototype.Browser.IE){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=false;c.load(a);return c}else{var b=new window.XMLHttpRequest();b.open("GET",a,false);b.send(null);return b.responseXML.documentElement}},setStylesheetUrl:function(a){this.xslt=this._loadDocument(a);return this},setDocumentUrl:function(a){this.setDocument(this._loadDocument(a));return this},setDocument:function(a){this.xml=a;return this},transform:function(d){var a;d=$(d);if(Prototype.Browser.IE){a=this.xml.transformNode(this.xslt)}else{var c=new XSLTProcessor();c.importStylesheet(this.xslt);var e=c.transformToDocument(this.xml);var b=new XMLSerializer();a=b.serializeToString(e.documentElement)}d.update(a)}})}if(window.__loadedJsLibraries["/res/js/lib/XFrameTunnel/Initiator.js"]!==true){window.__loadedJsLibraries["/res/js/lib/XFrameTunnel/Initiator.js"]=true;(function(){if(typeof window.cm4all=="undefined"){window.cm4all={}}if(typeof cm4all.XFrameTunnel=="undefined"){try{var a=document.getElementsByTagName("script");var b=a.item(a.length-1);var d=/([^\/]+:\/\/[^\/]+)/.exec(b.src);cm4all.XFrameTunnel={base:d?d[1]:"",data:(b.textContent||b.text)}}catch(c){}}cm4all.XFrameTunnelInitiator=Class.create({commands:null,alienFrame:null,txnid:null,opener:null,windowRef:null,rbase:null,initialize:function(g,f,e){this.alienFrame=$(g);this.txnid=Math.random().toString(16).replace(/^0./,"");this.opener=f;this.commands=Object.extend(this,e||cm4all.XFrameTunnelInitiator.defaultCommands);cm4all.XFrameTunnelInitiator.register(this)},exec:function(f,i,h,g){f=f||this.windowRef;i=i||this.rbase;h=h||"";g=g||{};this.windowRef=f;this.rbase=i;if(Object.isString(g)){g=g.evalJSON()}if(Object.isFunction(this.commands[h])){if(this.commands[h](g)){var e=new cm4all.HttpURL(i);HttpURLUtils.setReverseParameter(e,"xft-txnid",this.txnid);HttpURLUtils.setReverseParameter(e,"xft-command",h);HttpURLUtils.setReverseParameter(e,"xft-response",Object.toJSON({returnValue:"OK",data:g}));HttpURLUtils.setReverseParameter(e,"xft-base",cm4all.XFrameTunnelInitiator.getBaseUrl());f.cm4all.XFrameTunnelDispatcher.navigate(e.toString())}Event.fire(this.alienFrame,"cm4all:xft-command:"+h)}else{alert("INVALID COMMAND: "+h)}},open:function(f,e){this.alienFrame.stopObserving("load");if(f.indexOf("javascript:")==0){this.alienFrame.src=g.toString();return}var g=new cm4all.HttpURL(f);var h={};cm4all.XFrameTunnelInitiator.defaultCommands.getCSS(h);HttpURLUtils.setReverseParameter(g,"xft-txnid",this.txnid);HttpURLUtils.setReverseParameter(g,"xft-base",cm4all.XFrameTunnelInitiator.getBaseUrl());HttpURLUtils.setReverseParameter(g,"xft-path",cm4all.XFrameTunnelInitiator.getPath());HttpURLUtils.setReverseParameter(g,"xft-css",Object.toJSON(h.cssUrls));this.alienFrame.observe("load",function(){this.alienFrame.stopObserving("load");(e||Prototype.emptyFunction)(this.alienFrame.contentWindow)}.bind(this));this.alienFrame.src=g.toString()},free:function(){cm4all.XFrameTunnelInitiator.unregister(this)}});Object.extend(cm4all.XFrameTunnelInitiator,{defaultCommands:{"popup-open":function(g){var e=cm4all.XFrameTunnelInitiator.createPopup(g);var f=new cm4all.XFrameTunnelInitiator(e,this);f.open(g.url);return false},"popup-close":function(e){cm4all.XFrameTunnelInitiator.closePopup();if(this.opener){this.opener.exec(null,null,"popup-closed",e)}return false},"popup-closed":function(e){return true},resize:function(g){var e=jQuery(this.alienFrame).parent();if(e.length<1){var h=this.alienFrame.id.substring(7,this.alienFrame.id.lastIndexOf("_"));e=jQuery("#widgetcontainer_"+h)}var f={};if(g.width&&isNaN(g.width)){f.width=g.width}else{if(g.width){f.width=g.width+"px"}}if(g.height&&isNaN(g.height)){f.height=g.height}else{if(g.height){f.height=g.height+"px"}}e.css(f);if(g.overflow){this.alienFrame.setAttribute("scrolling",(g.overflow=="hidden")?"no":"auto")}if(this.opener){cm4all.XFrameTunnelInitiator.resizePopup(g.width,g.height)}return true},"get-wrapper-style":function(e){var f=jQuery(this.alienFrame).parent();jQuery.each(e,function(g,h){e[g]=f.css(g)});return e},getCSS:function(k){var j=[];var f=document.getElementsByTagName("link");var e=cm4all.Common.getLibServer()+"/beng/designs/res/css/resetwidget.css";for(var h=0;h<f.length;h++){var g=f.item(h).href;if(g&&(g.match(/.*\/beng\/designs\/.*\.css/)||g.match(/.*\/1,css,8,1/)||g.match(/.*\/1,mcss,8,1/)||g.match(/.*\/beng\/coma\/Design.cls\/action=getCss.*/))){var l=new RegExp(/.*\/beng\/designs\/res\/css\/base\.css/);if(g.match(l)){e=g.replace(/base\.css/g,"resetwidget.css")}if(g.indexOf("/")==0){g=document.location.protocol+"//"+document.location.host+g}j.push(g)}}j.push(e);k.cssUrls=j;return true}},xftis:new Hash(),register:function(e){cm4all.XFrameTunnelInitiator.xftis.set(e.txnid,e)},unregister:function(e){cm4all.XFrameTunnelInitiator.xftis.unset(e.txnid)},getBaseUrl:function(){var e=new cm4all.HttpURL(document.location.href);e.ref=null;e.path="";return e.toString()},getPath:function(){var e=new cm4all.HttpURL(document.location.href);var f=e.path;f=f.replace(/;.*$/,"");return f},dispatch:function(e,f,j,i,h){var g=cm4all.XFrameTunnelInitiator.xftis.get(e);if(g){g.exec(f,j,i,h)}else{}},createPopup:function(){if(!window.__popup){window.__popup=[]}window.__popup.push(new DummyPopup());return window.__popup[window.__popup.length-1].iframe},closePopup:function(){window.__popup.pop().close()},resizePopup:function(e,f){window.__popup[window.__popup.length-1].resize(e,f)}});DummyPopup=Class.create({initialize:function(){this.background=new Element("div").setStyle({position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"#000000",backgroundImage:'url("/beng/res/img/spacer.gif")'}).setOpacity(0.5);this.iframe=new Element("iframe").setStyle({position:"fixed",top:"50%",left:"50%",marginTop:"-200px",marginLeft:"-200px",width:"400px",height:"400px",backgroundColor:"#FFFFFF",border:"1px solid #000000",zIndex:"3000"});$(document.body).insert(this.background);$(document.body).insert(this.iframe)},close:function(){this.iframe.remove();this.background.remove()},resize:function(e,f){this.iframe.setStyle({marginTop:(-f/2)+"px",marginLeft:(-e/2)+"px"})}})})()}if(window.__loadedJsLibraries["/res/js/lib/DOM2JSON.js"]!==true){window.__loadedJsLibraries["/res/js/lib/DOM2JSON.js"]=true;(function(window){var cm4all=(window.cm4all=window.cm4all||{});if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var TEXT_ACCESSOR="nodeValue";var IE8=(document.documentMode&&document.documentMode<9);if(IE8){Object.defineProperty=function(target,name,config){if(config.value){target[name]=config.value}else{target[name]=(config.get||config.set)?function(){if(arguments.length>0){config.set.apply(target,arguments)}else{return config.get()}}:target[name]}}}cm4all.DOM2JSON=function(node){if(node){Object.defineProperty(this,"$dom",{enumerable:false,configurable:false,value:node});switch(node.nodeType){case 3:case 4:text2json(node,this);break;case 9:element2json(node.documentElement,this);break;case 1:element2json(node,this);break;case 2:attribute2json(node,this)}}};cm4all.JSONAccess=function(o){this.o=o||window};cm4all.JSONAccess.prototype.$get=function(jsonPath){return $get.call(this.o,jsonPath)};cm4all.JSONAccess.prototype.$set=function(jsonPath,jsonObject){$set.call(this.o,jsonPath,jsonObject);return this.$get(jsonPath)};cm4all.DOM2JSON.prototype.$getValue=function(jsonPath,baseObject){return cm4all.DOM2JSON.prototype.$get.call(baseObject||window,jsonPath)};function JSONAccess(){}JSONAccess.prototype.$get=function(jsonPath){return $get.call(this,jsonPath)};Object.defineProperty(JSONAccess.prototype,"$get",{enumerable:false});JSONAccess.prototype.$set=function(jsonPath,jsonObject){$set.call(this,jsonPath,jsonObject);return this.$get(jsonPath)};Object.defineProperty(JSONAccess.prototype,"$set",{enumerable:false});cm4all.DOM2JSON.prototype.$get=JSONAccess.prototype.$get;cm4all.DOM2JSON.prototype.$set=JSONAccess.prototype.$set;function $get(jsonPath){try{return eval("this"+functionalizeNormalizedJsonPath(normalizeJsonPath(jsonPath)))}catch(e){return undefined}}function $set(jsonPath,jsonObject){jsonPath=normalizeJsonPath(jsonPath);var steps=jsonPath.split(/\[|\]?\[|\]/);if(steps[0]===""){steps.shift()}try{ensureObject(steps,this,jsonObject)}catch(e){Common.log(e.message)}}function ensureAttribute(element,name,value,jsonElement){var valueType=typeof value;if(value!==null&&valueType!==undefined&&valueType!=="string"){Common.log("Illegal type for attribute value "+value);return}var i;if(value==null||typeof value=="undefined"){element.removeAttribute(name);delete jsonElement["@"+name]}else{element.setAttribute(name,value)}children=element.attributes;for(i=0;i<children.length;i++){attribute2json(children.item(i),jsonElement)}}function ensureTextNode(element,text,jsonElement){var valueType=typeof text;if(text!==null&&valueType!=="undefined"&&valueType!=="string"){return}var textNode=element.ownerDocument.createTextNode(text);element.appendChild(textNode);text2json(textNode,jsonElement)}function appendElement(parentElement,parentJsonElement,name,childJsonElement){var newElement=parentElement.ownerDocument.createElement(name);parentElement.appendChild(newElement);if(parentJsonElement){element2json(newElement,parentJsonElement)}jsonElement2element(childJsonElement,newElement)}function ensureObject(steps,current,jsonObject){var element,step=steps.shift();step=step.trim();step=/^"/.test(step)?step.replace(/^"(.*)"$/,"$1"):Number(step);element=resolve(current.$dom);if(typeof resolve(current[step])==="undefined"){ensureJsonPath(steps,step,element,current,jsonObject);return}if(Boolean(steps[0])){ensureObject(steps,resolve(current[step]),jsonObject)}else{setJsonObject(step,element,current,jsonObject)}}function setJsonObject(step,element,current,jsonObject){var currentElement,i,children;if(/^@/.test(step)){ensureAttribute(element,step.replace(/^@/,""),jsonObject,current)}else{if(/^\$$/.test(step)){children=element.childNodes;for(i=children.length-1;i>=0;i--){currentElement=children.item(i);switch(currentElement.nodeType){case 3:case 4:element.removeChild(currentElement)}}ensureTextNode(element,jsonObject,current)}else{if(typeof step==="number"){element=resolve(resolve(current[step]).$dom);jsonElement2element(jsonObject,element)}else{children=element.childNodes;for(i=children.length-1;i>=0;i--){currentElement=children.item(i);if(currentElement.nodeName===step){switch(currentElement.nodeType){case 1:element.removeChild(currentElement)}}}if(jsonObject==null||jsonObject==undefined){return}jsonObject=Object.isArray(jsonObject)?jsonObject:[jsonObject];for(i=0;i<jsonObject.length;i++){appendElement(element,i===jsonObject.length-1?resolve(current.$parent):null,step,resolve(jsonObject[i]))}}}}}function ensureJsonPath(steps,step,element,current,jsonObject){var i;if(typeof step==="number"){element=resolve(resolve(current.$parent).$dom);for(i=Object.isArray(current)?current.length:1;i<=step;i++){appendElement(element,resolve(current.$parent),resolve(current.$name),{})}current=resolve(resolve(current.$parent)[resolve(current.$name)])}else{if(element){if(/^@/.test(step)){ensureAttribute(element,step.replace(/^@/,""),"",current)}else{if(/^\$$/.test(step)){ensureTextNode(element,"",current)}else{appendElement(element,current,step,{})}}}else{Common.log("Expected element node but found other.")}}steps.unshift(String(typeof step==="number"?step:'"'+step+'"'));ensureObject(steps,current,jsonObject)}function normalizeJsonPath(jsonPath){return("."+jsonPath).replace(/\[\s*"(.*?)"\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/\[\s*'(.*?)'\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/\[\s*(.*?)\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/^\.\./,".").replace(/\.(([\\][\.]|[^.])*)/g,function($0,$1){var val=$1.replace(/"/g,'\\"').replace(/\\./g,".");var quote=isNaN(Number(val))?'"':"";return"["+quote+val+quote+"]"})}function functionalizeNormalizedJsonPath(normalizedJsonPath){return normalizedJsonPath.replace(/\]/g,IE8?"]()":"]")}function element2json(element,parentJsonElement){if(element==null||element.nodeType==undefined||element.nodeType!=1){return}collectSiblingElements(parentJsonElement,element)}function element2jsonElement(element,parentJsonObject){var i,jsonObject=new JSONAccess(),children=element.childNodes;Object.defineProperty(jsonObject,"$dom",{enumerable:false,configurable:false,value:element});Object.defineProperty(jsonObject,"$parent",{enumerable:false,configurable:false,value:parentJsonObject});Object.defineProperty(jsonObject,"$name",{enumerable:false,configurable:false,value:element.nodeName});for(i=0;i<children.length;i++){collectSiblingElements(jsonObject,children.item(i))}children=element.attributes;for(i=0;i<children.length;i++){attribute2json(children.item(i),jsonObject)}return jsonObject}function collectSiblingElements(parentJsonElement,element){var parent=element.parentNode;switch(element.nodeType){case 1:if(!parentJsonElement.hasOwnProperty(element.nodeName)){Object.defineProperty(parentJsonElement,element.nodeName,{configurable:true,enumerable:true,get:function(){var store=[],j,elements=parent.childNodes;for(j=0;j<elements.length;j++){collectAllSiblingsWithNodeName(elements.item(j),element.nodeName,store,parentJsonElement)}if(store.length>1){store.$parent=parentJsonElement;store.$name=element.nodeName;return store}return resolve(store[0])},set:function(newValue){var elements=parent.childNodes,j,ce;for(j=elements.length-1;j>=0;j--){ce=elements.item(j);if(ce.nodeName===element.nodeName&&ce.nodeType===1){parent.removeChild(ce)}}if(newValue){newValue=Object.isArray(newValue)?newValue:[newValue];for(j=0;j<newValue.length;j++){appendElement(parent,parentJsonElement,element.nodeName,resolve(newValue[j]))}}}})}break;case 3:case 4:text2json(element,parentJsonElement)}}function collectAllSiblingsWithNodeName(element,nodeName,store,parentJsonObject){if(element.nodeName===nodeName){switch(element.nodeType){case 1:Object.defineProperty(store,store.length,{configurable:true,enumerable:true,get:function(){if(!element){return element}return element2jsonElement(element,parentJsonObject)},set:function(newValue){if(!newValue){element.parentNode.removeChild(element);element=undefined}else{jsonElement2element(newValue,element)}}})}}}function jsonElement2element(jsonElement,element){var key=undefined,value,children,current,i;children=element.childNodes;for(i=children.length-1;i>=0;i--){element.removeChild(children.item(i))}children=element.attributes;for(i=children.length-1;i>=0;i--){element.removeAttributeNode(children.item(i))}for(key in jsonElement){value=resolve(jsonElement[key]);if(/^@/.test(key)){element.setAttribute(key.replace(/^@/,""),value)}else{if(/^\$$/.test(key)){element.appendChild(element.ownerDocument.createTextNode(value))}else{if(Object.isArray(value)){for(i=0;i<value.length;i++){current=element.ownerDocument.createElement(key);element.appendChild(current);jsonElement2element(resolve(value[i]),current)}}else{if(value){current=element.ownerDocument.createElement(key);element.appendChild(current);jsonElement2element(value,current)}}}}}}function attribute2json(attribute,jsonElement){Object.defineProperty(jsonElement,"@"+attribute.name,{configurable:true,enumerable:true,get:function(){return attribute.value},set:function(newValue){if(newValue==null||typeof newValue==="undefined"){attribute.ownerElement.removeAttributeNode(attribute)}else{attribute.value=newValue}}})}function text2json(textNode,jsonElement){Object.defineProperty(jsonElement,"$",{configurable:true,enumerable:true,get:function(){var current,children=textNode.parentNode.childNodes,i,text=undefined;for(i=0;i<children.length;i++){current=children.item(i);switch(current.nodeType){case 3:case 4:text=(text||"")+current[TEXT_ACCESSOR]}}return(text?text.trim():text)},set:function(newValue){var parent=textNode.parentNode,current,children=parent.childNodes,i;for(i=children.length-1;i>=0;i--){current=children.item(i);switch(current.nodeType){case 3:case 4:if(i>0){parent.removeChild(current)}else{current.data=newValue;textNode=current}}}}})}function resolve(o){if(typeof o=="function"){return o()}return o}})(window)}window.__loadedCssLibraries["/res/js/lib/css/xlate.css"]=true;window.__loadedCssLibraries["/res/js/lib/css/fullscreen.css"]=true;